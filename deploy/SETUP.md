# ğŸš¨ FRPè¿æ¥é…ç½®è¯´æ˜

## å½“å‰æƒ…å†µ
- âœ… æœåŠ¡å™¨IP: 172.104.59.98
- âœ… FRPç«¯å£7000å·²å¼€æ”¾
- âŒ Tokenè®¤è¯å¤±è´¥
- â“ ä½ æä¾›çš„å¯†é’¥ `ce755101ccd9452c` å¯èƒ½ä¸æ˜¯FRPçš„token

## éœ€è¦ç¡®è®¤çš„ä¿¡æ¯

### 1. è·å–æ­£ç¡®çš„FRP Token

è¯·SSHç™»å½•åˆ°ä½ çš„LinodeæœåŠ¡å™¨ï¼ŒæŸ¥çœ‹FRPé…ç½®ï¼š

```bash
# SSHç™»å½•
ssh root@172.104.59.98

# æŸ¥çœ‹FRPé…ç½®æ–‡ä»¶
cat /etc/frp/frps.ini
# æˆ–è€…
cat /etc/frp/frps.toml
# æˆ–è€…
cat /opt/frp/frps.toml
# æˆ–è€…
find / -name "frps.*" 2>/dev/null
```

æ‰¾åˆ°ç±»ä¼¼è¿™æ ·çš„é…ç½®ï¼š
```toml
auth.token = "å®é™…çš„tokenå€¼"
# æˆ–è€…
[common]
token = å®é™…çš„tokenå€¼
```

### 2. ä¸¤ç§è§£å†³æ–¹æ¡ˆ

#### æ–¹æ¡ˆA: ä½¿ç”¨ç°æœ‰FRPæœåŠ¡ï¼ˆæ¨èï¼‰
å¦‚æœä½ çš„æœåŠ¡å™¨å·²ç»æœ‰FRPåœ¨è¿è¡Œï¼Œæˆ‘ä»¬ç›´æ¥ä½¿ç”¨å®ƒï¼š

1. è·å–æ­£ç¡®çš„token
2. æ›´æ–°æœ¬åœ° `frpc.toml` æ–‡ä»¶ï¼š
```toml
serverAddr = "172.104.59.98"
serverPort = 7000
auth.method = "token"
auth.token = "ä»æœåŠ¡å™¨è·å–çš„æ­£ç¡®token"
```

3. è¿è¡Œè¿æ¥ï¼š
```bash
cd deploy
./frpc -c frpc.toml
```

#### æ–¹æ¡ˆB: é…ç½®ç‹¬ç«‹ç«¯å£
å¦‚æœç°æœ‰FRPè¢«å…¶ä»–æœåŠ¡ä½¿ç”¨ï¼Œå¯ä»¥è¿è¡Œç¬¬äºŒä¸ªFRPå®ä¾‹ï¼š

1. åœ¨æœåŠ¡å™¨ä¸Šåˆ›å»ºæ–°çš„FRPé…ç½®ï¼ˆä½¿ç”¨ä¸åŒç«¯å£ï¼‰ï¼š
```bash
# åˆ›å»ºæ–°é…ç½®
cat > /opt/frp/frps-storyboard.toml << EOF
bindPort = 7001  # ä½¿ç”¨ä¸åŒç«¯å£
vhostHTTPPort = 7070
auth.token = "ce755101ccd9452c"  # ä½¿ç”¨ä½ çš„token
EOF

# å¯åŠ¨æ–°å®ä¾‹
/opt/frp/frps -c /opt/frp/frps-storyboard.toml &
```

2. æœ¬åœ°ä½¿ç”¨æ–°ç«¯å£è¿æ¥ï¼š
```toml
serverAddr = "172.104.59.98"
serverPort = 7001  # æ–°ç«¯å£
auth.token = "ce755101ccd9452c"
```

## å¿«é€Ÿæµ‹è¯•å‘½ä»¤

æµ‹è¯•è¿æ¥ï¼ˆè°ƒè¯•æ¨¡å¼ï¼‰ï¼š
```bash
./frpc -c frpc.toml
```

æŸ¥çœ‹è¯¦ç»†æ—¥å¿—ï¼š
```bash
tail -f frpc.log
```

## è®¿é—®åœ°å€

æˆåŠŸè¿æ¥åï¼Œä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹åœ°å€è®¿é—®ï¼š

1. **HTTPè®¿é—®**: http://storyboard.172.104.59.98.nip.io
2. **TCPç›´è¿**: http://172.104.59.98:3001
3. **Dashboard**: http://172.104.59.98:7500

## âš ï¸ æ³¨æ„äº‹é¡¹

1. ç¡®ä¿æœåŠ¡å™¨é˜²ç«å¢™å¼€æ”¾äº†å¿…è¦çš„ç«¯å£
2. å¦‚æœæœ‰nginxæˆ–å…¶ä»–åå‘ä»£ç†ï¼Œå¯èƒ½éœ€è¦é¢å¤–é…ç½®
3. Tokenå¿…é¡»å®Œå…¨åŒ¹é…ï¼ŒåŒ…æ‹¬å¤§å°å†™å’Œç©ºæ ¼

## éœ€è¦ä½ æä¾›çš„ä¿¡æ¯

è¯·æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å¹¶å‘Šè¯‰æˆ‘ç»“æœï¼š

```bash
# 1. SSHåˆ°æœåŠ¡å™¨
ssh root@172.104.59.98

# 2. æŸ¥æ‰¾FRPé…ç½®
find /etc /opt -name "frps*" 2>/dev/null

# 3. æŸ¥çœ‹FRPè¿›ç¨‹
ps aux | grep frp

# 4. æŸ¥çœ‹ä½¿ç”¨çš„ç«¯å£
netstat -tlnp | grep frp
```

æœ‰äº†è¿™äº›ä¿¡æ¯ï¼Œæˆ‘å°±èƒ½å¸®ä½ æ­£ç¡®é…ç½®è¿æ¥äº†ï¼